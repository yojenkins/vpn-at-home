(function(e){function t(t){for(var n,r,o=t[0],l=t[1],c=t[2],d=0,v=[];d<o.length;d++)r=o[d],s[r]&&v.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(v.length)v.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,o=1;o<i.length;o++){var l=i[o];0!==s[l]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=i[0]))}return e}var n={},s={app:0},a=[];function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"0325":function(e,t,i){},"21bb":function(e,t,i){"use strict";var n=i("bcc9"),s=i.n(n);s.a},"2b23":function(e,t,i){},"2c4c":function(e,t,i){"use strict";var n=i("3dd2"),s=i.n(n);s.a},"2cfd":function(e,t,i){"use strict";var n=i("e07e"),s=i.n(n);s.a},"3dd2":function(e,t,i){},"3de0":function(e,t,i){"use strict";var n=i("cf16"),s=i.n(n);s.a},4678:function(e,t,i){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=a(e);return i(t)}function a(e){var t=n[e];if(!(t+1)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return t}s.keys=function(){return Object.keys(n)},s.resolve=a,e.exports=s,s.id="4678"},"4cb7":function(e,t,i){"use strict";var n=i("4f1d"),s=i.n(n);s.a},"4f1d":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("097d"),i("1157"),i("c86c"),i("87ee");var n,s,a=i("2b0e"),r=i("1dce"),o=i.n(r),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[e.$route.meta.noNavbar?e._e():i("NavigationBar"),i("div",{staticClass:"ui container"},[i("router-view")],1)],1)},c=[],u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("nav",{staticClass:"ui top fixed menu"},[i("div",{staticClass:"ui container"},[i("router-link",{staticClass:"item",attrs:{"active-class":"active",to:"/",exact:""}},[i("i",{staticClass:"icon home"}),e._v(" Home")]),e.isSuperuser?i("router-link",{staticClass:"item",attrs:{"active-class":"active",to:"/settings",exact:""}},[i("i",{staticClass:"icon cog"}),e._v(" Settings")]):e._e(),e.isSuperuser?i("a",{staticClass:"item",attrs:{href:"/admin/"}},[i("i",{staticClass:"icon cogs"}),e._v(" Admin")]):e._e(),e._m(0),e._m(1),i("div",{staticClass:"right menu"},[i("div",{staticClass:"ui item"},[i("span",{class:{superuser:e.isSuperuser}},[i("b",[e._v(e._s(e.email))])])]),i("div",{staticClass:"ui item no-padding-right"},[i("div",{staticClass:"ui primary button icon compact negative",on:{click:e.onClickedLogout}},[i("i",{staticClass:"icon sign-out"})])])])],1)])},d=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a",{staticClass:"item",attrs:{href:"https://www.vultr.com/?ref=7515725",target:"_blank"}},[i("i",{staticClass:"icon server"}),e._v(" Vultr")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a",{staticClass:"item",attrs:{href:"https://www.patreon.com/ezaquarii",target:"_blank"}},[i("i",{staticClass:"icon patreon"}),e._v(" Support Us")])}],v=i("d225"),f=i("b0b4"),p=i("308d"),m=i("6bb5"),h=i("4e2b"),b=i("60a3"),g=(n=Object(b["a"])({name:"NavigationBar",components:{}}),n(s=function(e){function t(){return Object(v["a"])(this,t),Object(p["a"])(this,Object(m["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"onClickedLogout",value:function(){this.$api.logout(this.onLogoutCompleted.bind(this))}},{key:"onLogoutCompleted",value:function(){this.$store.commit("logout"),this.$router.push({path:"/login"})}},{key:"isSuperuser",get:function(){return this.$store.getters.isSuperuser}},{key:"email",get:function(){return this.$store.state.user.email}}]),t}(b["b"]))||s),_=g,y=(i("a997"),i("2877")),j=Object(y["a"])(_,u,d,!1,null,"604a0981",null);j.options.__file="NavigationBar.vue";var C=j.exports,k={components:{NavigationBar:C},created:function(){this.$store.getters.isAuthenticated&&this.$store.dispatch("hydrate")}},S=k,O=(i("5c0b"),Object(y["a"])(S,l,c,!1,null,null,null));O.options.__file="App.vue";var w=O.exports,$=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ui grid center aligned"},[e._m(0),e._m(1),i("div",{staticClass:"row"},[i("div",{staticClass:"ten wide column left aligned"},[i("div",{staticClass:"issue"},[i("div",{staticClass:"para"},[e._v("\n                    Default, sane config can be bootstrapped with a single "),i("span",{staticClass:"shell"},[e._v("init.sh")]),e._v(" command.\n                    Make sure you run it in the application working directory and as the application user:\n                    "),i("div",{staticClass:"example"},[e._v("\n                        $ whoami"),i("br"),e._v("\n                        "+e._s(e.user)),i("br"),e._v("\n                        $ cd "+e._s(e.workingDir)),i("br"),e._v("\n                        $ "+e._s(e.initSh)),i("br")])]),i("div",{staticClass:"para"},[e._v("\n                Application is initialized in "),i("span",{staticClass:"shell"},[e._v(e._s(e.workingDir)+"/data")]),e._v(", which will contain\n                everything the app needs to run. If you want to perform manual configuration, please follow the guide below.\n                Don't forget that "),i("span",{staticClass:"important"},[e._v("you need to restart the server")]),e._v(" to reload updated config.\n                ")]),i("div",{staticClass:"para"},[e._v("\n                    You can activate "),i("i",[e._v("virtual environement")]),e._v(" to save yourself typing full paths:\n                    "),i("div",{staticClass:"example"},[e._v("\n                        $ source "+e._s(e.virtualEnvDir)+"/bin/activate"),i("br"),e._v("\n                        (env) $ manage.py"),i("br"),e._v("\n                        ...\n                    ")])])]),i("div",{staticClass:"issue"},[e._m(2),e._v("\n                Here are some facts that you might find useful when trouble-shooting the app installation:\n                "),i("div",[i("table",{staticClass:"ui very basic collapsing celled table"},[i("tbody",[i("tr",[e._m(3),i("td",[e._v(e._s(e.user))])]),i("tr",[e._m(4),i("td",[e._v(e._s(e.workingDir))])]),i("tr",[e._m(5),i("td",[e._v(e._s(e.workingDir)+"/data")])]),i("tr",[e._m(6),i("td",[e._v(e._s(e.virtualEnvDir))])]),i("tr",[e._m(7),i("td",[e._v(e._s(e.virtualEnvDir)+"/bin")])])])])]),i("div",{staticClass:"para"},[e._v("\n                    Data directory contains everything you need to backup and restore application state. Just\n                    copy it and keep safe. When you move the app to a new place, just restore it and you'll be\n                    ready to go. No fancy database dump/restoration is needed.\n                ")])]),i("div",{staticClass:"issue"},[e.hasSettingsFile?i("div",[e._m(8),e._m(9)]):i("div",[e._m(10),i("div",[e._v("\n                      OpenVPN@Home is configured through a JSON "),i("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" file placed in deployment\n                      directory. File can be generated with a management command:\n                      "),i("p",{staticClass:"example"},[e._v("\n                        $ "+e._s(e.virtualEnvDir)+"/bin/manage.py configure"),i("br"),e._v("\n                        cat data/settings.json\n                      ")]),e._v("\n                      You can also check "),i("span",{staticClass:"shell"},[e._v("manage.py configure --help")]),e._v(" for details.\n                    ")])])]),i("div",{staticClass:"issue"},[e.isEmailConfigured?i("div",[e._m(11),e.isEmailEnabled?i("p",[e._v("E-mail is "),i("span",{staticClass:"green bold"},[e._v("enabled")]),e._v(" and configured.")]):i("p",[e._v("E-mail is "),i("span",{staticClass:"red bold"},[e._v("disabled.")]),e._v(" You won't receive error logs nor you can send config files.")])]):i("div",[e._m(12),e._m(13)])]),i("div",{staticClass:"issue"},[e.isDatabaseInitialized?i("div",[e._m(14),i("p",[e._v("\n                        Database is initialized and up-to-date.\n                    ")])]):i("div",[e._m(15),i("div",[e._v("\n                        Database must be initialized (migrated) before the app is usable. Use standard Django migration utility.\n                        "),i("div",{staticClass:"example"},[e._v("\n                            $ "+e._s(e.virtualEnvDir)+"/bin/manage.py migrate\n                        ")])])])]),i("div",{staticClass:"issue"},[e.hasAdminUser?i("div",[e._m(16),i("p",[e._v("\n                        Admin user is configured, has a password and is activated.\n                    ")])]):i("div",[e._m(17),i("div",[e._v("\n                        Admin user is a must. You want to use your real e-mail address and sane password for this one.\n                        "),i("div",{staticClass:"example"},[e._v("\n                            $ "+e._s(e.virtualEnvDir)+"/bin/manage.py set_admin my@email.com my-secret-password\n                        ")])])])]),i("div",{staticClass:"issue"},[e.isConfigured?i("div",[e._m(18),i("p",[e._v("Settings file is reviewed and accepted.")])]):i("div",[e._m(19),e._m(20)])])])])])},E=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row center aligned"},[i("h1",{staticClass:"title"},[e._v("Welcome to VPN@Home")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row center aligned"},[i("h3",[e._v("The app requires some configuration")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted info icon",attrs:{"aria-hidden":"true"}}),e._v(" Orientation")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("b",[e._v("User running the app")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("b",[e._v("Working directory")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("b",[e._v("App data directory")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("b",[e._v("Python virtual environment")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("b",[e._v("App supplied scripts")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Has settings file")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[e._v("\n                        Configuration file "),i("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" is present in th deployment directory.\n                    ")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" No settings file yet")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" E-mail configured")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" You must configure e-mail")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v("\n                        E-mail is "),i("span",{staticClass:"green bold"},[e._v("enabled")]),e._v(" but not fully configured yet. If you don't want to use\n                        e-mail, set "),i("span",{staticClass:"shell"},[e._v("enabled")]),e._v(" to "),i("span",{staticClass:"shell"},[e._v("false")]),e._v(" and you can skip the configuration.\n                        Open "),i("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" and fill email related fields:\n                        "),i("div",{staticClass:"example"},[e._v("\n                            {"),i("br"),e._v("  ..."),i("br"),e._v('\n                                  "email": {'),i("br"),e._v('\n                                    "enabled": '),i("i",[e._v("true / false")]),e._v(","),i("br"),e._v('\n                                    "server_from": '),i("i",[e._v("e-mail showing in From:")]),e._v(","),i("br"),e._v('\n                                    "admin_emails": '),i("i",[e._v("[list of e-mails to send crash logs to]")]),i("br"),e._v('\n                                    "smtp": {'),i("br"),e._v('\n                                      "server": '),i("i",[e._v('"your.smtp.host"')]),e._v(","),i("br"),e._v('\n                                      "port": '),i("i",[e._v("TLS port")]),e._v(","),i("br"),e._v('\n                                      "user": '),i("i",[e._v("most likely your e-mail address")]),e._v(","),i("br"),e._v('\n                                      "password": '),i("i",[e._v("password")]),e._v(","),i("br"),e._v("\n                                    }"),i("br"),e._v("\n                              ..."),i("br"),e._v("}\n                        ")]),e._v("\n                        Your "),i("span",{staticClass:"shell"},[e._v("server_from")]),e._v(" should be set to a valid e-mail address. Many SMTP servers\n                        will refuse to send e-mail with bogus "),i("i",[e._v("From")]),e._v(" field. "),i("span",{staticClass:"important"},[e._v("You must restart the service to pick up new configuration.")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Database is ready")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" Database is not initialized (migrated) yet")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Admin user is configured")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" Admin user is not configured yet")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Settings reviewed and accepted")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" You must review and accept settings first")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v("\n                        Settings file must be reviewed and accepted before proceeding. Open "),i("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" in\n                        your favorite editor and set "),i("span",{staticClass:"shell"},[e._v("configured")]),e._v(" flag to "),i("span",{staticClass:"shell"},[e._v("true")]),e._v(".\n                        Most interesting part is your "),i("span",{staticClass:"shell"},[e._v("email")]),e._v(" section.\n                        "),i("div",{staticClass:"example"},[e._v("\n                            {"),i("br"),e._v("  ..."),i("br"),e._v('  "configured": "true"'),i("br"),e._v("  ..."),i("br"),e._v('  "email": { ... }'),i("br"),e._v("  ..."),i("br"),e._v("}\n                        ")])])}],D={computed:{hasSettingsFile:function(){return this.$store.state.status.appNotReady.has_settings_file},isConfigured:function(){return this.$store.state.status.appNotReady.is_configured&&this.hasSettingsFile},isDatabaseInitialized:function(){return this.$store.state.status.appNotReady.is_migrated},managePy:function(){return this.$store.state.status.appNotReady.manage_py},initSh:function(){return this.$store.state.status.appNotReady.init_sh},deploymentDir:function(){return this.$store.state.status.appNotReady.deployment_dir},hasAdminUser:function(){return this.$store.state.status.appNotReady.has_active_admin},isEmailConfigured:function(){return this.$store.state.status.appNotReady.is_email_configured},isEmailEnabled:function(){return this.$store.state.status.appNotReady.is_email_enabled},virtualEnvDir:function(){return this.$store.state.status.appNotReady.virtual_env},workingDir:function(){return this.$store.state.status.appNotReady.working_dir},user:function(){return this.$store.state.status.appNotReady.user}}},N=D,x=(i("3de0"),Object(y["a"])(N,$,E,!1,null,"5c2c2f16",null));x.options.__file="AppNotReady.vue";var P,A,R=x.exports,L=i("8c4f"),F=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",[i("div",{staticClass:"info"},[i("sui-message",{attrs:{info:""}},[e._v("\n                Check your SSH deployment key in "),i("span",[i("i",{staticClass:"icon cog"}),i("b",[e._v("Settings")]),i("i",{staticClass:"icon arrow right"}),i("b",[e._v("SSH keys")])]),e._v(".\n            ")])],1),e.isSuperuser?i("ConfigList",{attrs:{title:"OpenVPN Servers",items:e.servers,emailEnabled:e.emailEnabled,deploymentEnabled:!0,isServer:!0,onClickedAdd:e.onClickedAddServer}}):e._e(),i("ConfigList",{attrs:{title:"OpenVPN Clients",items:e.clients,emailEnabled:e.emailEnabled,deploymentEnabled:!0,isClient:!0,addDisabled:!e.$store.getters.hasServer,onClickedAdd:e.onClickedAddClient}}),i("NewServerDialog",{ref:"newServerDialog"}),i("NewClientDialog",{ref:"newClientDialog"}),i("DeploymentDialog",{ref:"deploymentDialog"}),i("DeleteServerDialog",{ref:"deleteServerDialog"})],1)])},U=[],z=i("013f"),V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"config-table"},[i("table",{staticClass:"ui celled striped table"},[i("col",{attrs:{width:"40%"}}),i("col",{attrs:{width:"15%"}}),i("col",{attrs:{width:"15%"}}),i("col",{attrs:{width:"25%"}}),i("col",{attrs:{width:"5%"}}),i("thead",[i("tr",[i("th",[e._v(e._s(e.title))]),i("th",[e._v("Created")]),i("th",[e._v("Expires")]),i("th",[e._v("E-Mail")]),i("th",[i("sui-button",{class:{disabled:e.addDisabled},attrs:{circular:"",size:"mini",color:"green",icon:"plus"},on:{click:e.onClickedAdd}})],1)])]),i("tbody",e._l(e.items,function(t){return i("ConfigListItem",{key:t.id,attrs:{item:t,emailEnabled:e.emailEnabled,deploymentEnabled:e.deploymentEnabled,isClient:e.isClient,isServer:e.isServer}})}),1)])])},M=[],q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("tr",[e.isServer?i("td",[e._v(e._s(e.item.name))]):e.isClient?i("td",[e._v("\n        "+e._s(e.item.name)+" @ "+e._s(e.item.server_name)+"\n    ")]):i("td",[e._v("id:"+e._s(e.item.id))]),i("td",[e._v(e._s(e.relativeCreated))]),i("td",[e._v(e._s(e.relativeValid))]),i("td",[e._v(e._s(e.item.email))]),i("td",{staticClass:"center"},[i("sui-dropdown",{staticClass:"icon",attrs:{icon:"ellipsis vertical"}},[i("sui-dropdown-menu",[i("a",{staticClass:"item",attrs:{href:e.item.download_url}},[i("sui-icon",{attrs:{name:"download"}}),e._v("Download config\n                ")],1),e.emailEnabled&&e.canSendEmail&&e.isClient?i("sui-dropdown-item",{on:{click:e.onSendMailClicked}},[i("sui-icon",{attrs:{name:"mail"}}),e._v("Send via e-mail\n                ")],1):e._e(),e.deploymentEnabled&&e.canDeploy?i("sui-dropdown-item",{on:{click:e.onDeployClicked}},[i("sui-icon",{attrs:{name:"play"}}),e._v("Deploy to server\n                ")],1):e._e(),e.isServer?i("sui-dropdown-item",{on:{click:e.onDeleteClicked}},[i("sui-icon",{attrs:{name:"trash"}}),e._v("Delete\n                ")],1):e._e()],1)],1)],1)])},T=[],H=i("c1df"),K=i.n(H),B=i("2ef0"),I=i.n(B),J="clicked_deploy_server",Y="clicked_delete_server",W=(P=Object(b["a"])({name:"ConfigListItem",props:["item","emailEnabled","deploymentEnabled","isClient","isServer"]}),P(A=function(e){function t(){return Object(v["a"])(this,t),Object(p["a"])(this,Object(m["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"onSendMailClicked",value:function(){this.$store.dispatch("sendClientConfigEmail",this.item.id)}},{key:"onDeployClicked",value:function(){this.$root.$emit(J,this.item)}},{key:"onDeleteClicked",value:function(){this.$root.$emit(Y,this.item)}},{key:"relativeCreated",get:function(){return K()(this.item.created).fromNow()}},{key:"relativeValid",get:function(){return K()(this.item.validity_end).fromNow()}},{key:"isSending",get:function(){return this.$store.getters.isSendingClientConfigEmail(this.item.id)}},{key:"canSendEmail",get:function(){return this.$store.getters.canSendEmail(this.item.email)}},{key:"canDeploy",get:function(){return I.a.has(this.item,"network")}}]),t}(b["b"]))||A),X=W,G=(i("b007"),Object(y["a"])(X,q,T,!1,null,"b732f2ca",null));G.options.__file="ConfigListItem.vue";var Q,Z,ee=G.exports,te=(Q=Object(b["a"])({name:"ConfigList",props:["items","title","emailEnabled","deploymentEnabled","isClient","isServer","addDisabled","onClickedAdd"],components:{ConfigListItem:ee}}),Q(Z=function(e){function t(){return Object(v["a"])(this,t),Object(p["a"])(this,Object(m["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),t}(b["b"]))||Z),ie=te,ne=(i("4cb7"),Object(y["a"])(ie,V,M,!1,null,"4002db2e",null));ne.options.__file="ConfigList.vue";var se=ne.exports,ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("sui-modal",{attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[i("sui-modal-header",[e._v("New OpenVPN Server")]),i("sui-modal-content",[i("sui-container",[e.open?i("NewServerForm",{ref:"form",on:{formUpdated:e.onFormUpdated}}):e._e()],1)],1),i("sui-modal-actions",[i("sui-button",{attrs:{floated:"right",compact:"",positive:"",disabled:!e.isValid},on:{click:e.onAccept}},[e._v("OK")]),i("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},re=[],oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ui form"},[i("div",{staticClass:"field"},[i("label",[e._v("Server Name")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],attrs:{placeholder:"Ex. 'My Home Server'",type:"text"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"fields"},[i("div",{staticClass:"twelve wide field"},[i("label",[e._v("Server Host Address")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.hostname,expression:"form.hostname"}],attrs:{placeholder:"Ex. myvpn.net or 192.168.1.1",type:"text"},domProps:{value:e.form.hostname},on:{input:function(t){t.target.composing||e.$set(e.form,"hostname",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"four wide field"},[i("label",[e._v("Port")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.port,expression:"form.port"}],attrs:{min:"1",max:"65535",type:"number"},domProps:{value:e.form.port},on:{input:function(t){t.target.composing||e.$set(e.form,"port",t.target.value)}}})])]),i("div",{staticClass:"field"},[i("label",[e._v("Transport Protocol")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.form.protocol,expression:"form.protocol"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.form,"protocol",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"udp"}},[e._v("UDP")]),i("option",{attrs:{value:"tcp"}},[e._v("TCP")])])]),i("div",{staticClass:"field"},[i("label",[e._v("Internal VPN network (private IP range, CIDR notation)")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.network,expression:"form.network"}],attrs:{placeholder:"Ex. 172.30.0.0/16",type:"text"},domProps:{value:e.form.network},on:{input:function(t){t.target.composing||e.$set(e.form,"network",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"field"},[i("div",{staticClass:"ui checked checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.deploy_dns,expression:"form.deploy_dns"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.form.deploy_dns)?e._i(e.form.deploy_dns,null)>-1:e.form.deploy_dns},on:{change:function(t){var i=e.form.deploy_dns,n=t.target,s=!!n.checked;if(Array.isArray(i)){var a=null,r=e._i(i,a);n.checked?r<0&&e.$set(e.form,"deploy_dns",i.concat([a])):r>-1&&e.$set(e.form,"deploy_dns",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.form,"deploy_dns",s)}}}),i("label",[e._v("Enable DNS server")])])])])},le=[],ce=i("cebc"),ue=i("b5ae"),de={name:"NewServerForm",data:function(){return{open:!1,form:{name:"",hostname:"",port:1194,protocol:"udp",network:"172.30.0.0/16",deploy_dns:!1}}},validations:{form:{name:{required:ue["required"]},hostname:{required:ue["required"]},port:{required:ue["required"]},protocol:{required:ue["required"]},network:{required:ue["required"]},deploy_dns:{required:ue["required"]}}},computed:{isValid:function(){return!this.$v.$invalid},value:function(){return Object(ce["a"])({},this.form)}},mounted:function(){var e=this;this.$emit("formUpdated",this.isValid),this.$watch("isValid",function(){e.$emit("formUpdated",e.isValid)})}},ve=de,fe=Object(y["a"])(ve,oe,le,!1,null,"73e35905",null);fe.options.__file="NewServerForm.vue";var pe,me,he=fe.exports,be=(pe=Object(b["a"])({components:{NewServerForm:he},data:function(){return{open:!1,isValid:!1}}}),pe(me=function(e){function t(){return Object(v["a"])(this,t),Object(p["a"])(this,Object(m["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"toggle",value:function(){this.open=!0}},{key:"onFormUpdated",value:function(e){this.isValid=e}},{key:"onAccept",value:function(){this.$store.dispatch("addServer",this.$refs.form.value),this.open=!1}},{key:"onReject",value:function(){this.open=!1}}]),t}(b["b"]))||me),ge=be,_e=(i("cbea"),Object(y["a"])(ge,ae,re,!1,null,"5601b971",null));_e.options.__file="NewServerDialog.vue";var ye=_e.exports,je=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("sui-modal",{attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[i("sui-modal-header",[e._v("New OpenVPN Client")]),i("sui-modal-content",[i("sui-container",[e.open?i("NewClientForm",{ref:"form",attrs:{servers:e.servers},on:{formUpdated:e.onFormUpdated}}):e._e()],1)],1),i("sui-modal-actions",[i("sui-button",{attrs:{floated:"right",compact:"",positive:"",disabled:!e.isValid},on:{click:e.onAccept}},[e._v("OK")]),i("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},Ce=[],ke=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ui form"},[i("div",{staticClass:"field"},[i("label",[e._v("Server")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.form.server,expression:"form.server"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.form,"server",t.target.multiple?i:i[0])}}},e._l(e.servers,function(t){return i("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}),0)]),i("div",{staticClass:"field"},[i("label",[e._v("Client Name")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],attrs:{placeholder:"Ex. 'My Home Server'",type:"text"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])])])},Se=[],Oe={name:"NewClientForm",props:{servers:Array},data:function(){return{open:!1,form:{name:"",server:this.servers[0].id}}},validations:{form:{name:{required:ue["required"]}}},computed:{isValid:function(){return!this.$v.$invalid},value:function(){return Object(ce["a"])({},this.form)}},mounted:function(){var e=this;this.$emit("formUpdated",this.isValid),this.$watch("isValid",function(){e.$emit("formUpdated",e.isValid)})}},we=Oe,$e=Object(y["a"])(we,ke,Se,!1,null,"480e2c9c",null);$e.options.__file="NewClientForm.vue";var Ee,De,Ne=$e.exports,xe=(Ee=Object(b["a"])({components:{NewClientForm:Ne},data:function(){return{open:!1,isValid:!1}}}),Ee(De=function(e){function t(){return Object(v["a"])(this,t),Object(p["a"])(this,Object(m["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"toggle",value:function(){this.open=!0}},{key:"onFormUpdated",value:function(e){this.isValid=e}},{key:"onAccept",value:function(){this.$store.dispatch("addClient",this.$refs.form.value),this.open=!1}},{key:"onReject",value:function(){this.open=!1}},{key:"servers",get:function(){return this.$store.state.servers}}]),t}(b["b"]))||De),Pe=xe,Ae=(i("2c4c"),Object(y["a"])(Pe,je,Ce,!1,null,"27b67c94",null));Ae.options.__file="NewClientDialog.vue";var Re,Le,Fe=Ae.exports,Ue=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("sui-modal",{attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[i("sui-modal-header",[e._v("Deploy OpenVPN server")]),i("sui-modal-content",{ref:"outputContainer",attrs:{scrolling:""}},[i("sui-container",[i("div",{staticClass:"output"},e._l(e.output,function(t,n){return i("div",{key:n},[e._v(e._s(t))])}),0)])],1),i("sui-modal-actions",[i("sui-button",{attrs:{floated:"right",compact:"",positive:"",loading:e.isRunning,disabled:e.isRunning},on:{click:e.onDeploy}},[e._v("Deploy")]),e.finished?i("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Close")]):i("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},ze=[],Ve=i("75fc"),Me=i("f499"),qe=i.n(Me),Te=function(e){return new WebSocket(e)},He=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Te;Object(v["a"])(this,e),this.output=[],this.createSocket=i,this.socket=null,this.onStart=null,this.onOutput=null,this.onFinish=null,this.hostname=t}return Object(f["a"])(e,[{key:"connect",value:function(e){if(null!=this.socket)throw Error("Already connected");this.socket=this.createSocket(e),this.socket.onopen=this._onOpen.bind(this),this.socket.onmessage=this._onMessage.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onerror=this._onError.bind(this)}},{key:"close",value:function(){this.socket&&this.socket.close()}},{key:"_onOpen",value:function(){var e={cmd:"start",args:{hostname:this.hostname}};this._sendJson(e)}},{key:"_onMessage",value:function(e){var t=JSON.parse(e.data);"running"===t.status&&t.output&&this.onOutput?this.onOutput(t.output):"start"===t.status&&this.onStart?this.onStart():"finished"===t.status&&this.onFinish&&this.onFinish()}},{key:"_onClose",value:function(){}},{key:"_onError",value:function(){}},{key:"_sendJson",value:function(e){var t=qe()(e);this.socket.send(t)}}]),e}(),Ke=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Te;Object(v["a"])(this,e),this.output=[],this.createSocket=i,this.socket=null,this.onStart=null,this.onOutput=null,this.onFinish=null,this.onClose=null,this.onError=null,this.args=t}return Object(f["a"])(e,[{key:"connect",value:function(e){if(null!=this.socket)throw Error("Already connected");this.socket=this.createSocket(e),this.socket.onopen=this._onOpen.bind(this),this.socket.onmessage=this._onMessage.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onerror=this._onError.bind(this)}},{key:"close",value:function(){this.socket&&this.socket.close()}},{key:"_onOpen",value:function(){var e={cmd:"start",args:this.args};this._sendJson(e)}},{key:"_onMessage",value:function(e){var t=JSON.parse(e.data);"running"===t.status&&t.output&&this.onOutput?this.onOutput(t.output):"started"===t.status&&this.onStart?this.onStart():"finished"===t.status&&this.onFinish?this.onFinish():"error"===t.status&&this.onError&&this.onError()}},{key:"_onClose",value:function(){this.onClose&&this.onClose()}},{key:"_onError",value:function(){this.onError&&this.onError()}},{key:"_sendJson",value:function(e){var t=qe()(e);this.socket.send(t)}}]),e}(),Be=(Re=Object(b["a"])({data:function(){return{isRunning:!1,finished:!1,open:!1,output:[]}}}),Re(Le=function(e){function t(){return Object(v["a"])(this,t),Object(p["a"])(this,Object(m["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"show",value:function(e){this.isRunning=!1,this.output=[],this.process=null,this.server=e,this.open=!0}},{key:"onDeploy",value:function(){this.process=new He(this.server.hostname),this.process.onStart=this.onStart,this.process.onFinish=this.onFinish,this.process.onOutput=this.onOutput,this.process.connect("ws://".concat(window.location.host,"/ws/deployment/")),this.isRunning=!0,this.finished=!1}},{key:"onReject",value:function(){this.open=!1,this.process&&this.process.close()}},{key:"onStart",value:function(){this.pushAutoScroll(["Deployment started","Ignore first '[ERROR]:' line - this is harmless Ansible bug. :o)"])}},{key:"onFinish",value:function(){this.pushAutoScroll(["Deployment finished."]),this.isRunning=!1,this.finished=!0}},{key:"onOutput",value:function(e){this.pushAutoScroll(e)}},{key:"pushAutoScroll",value:function(e){var t,i=this.$refs.outputContainer.$el,n=5,s=i.scrollTop>=i.scrollHeight-i.clientHeight-n;(t=this.output).push.apply(t,Object(Ve["a"])(e)),s&&this.$nextTick(function(){i.scrollTop=i.scrollHeight-i.clientHeight})}}]),t}(b["b"]))||Le),Ie=Be,Je=(i("8ba9"),Object(y["a"])(Ie,Ue,ze,!1,null,"4cdeca36",null));Je.options.__file="DeploymentDialog.vue";var Ye,We,Xe=Je.exports,Ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("sui-modal",{staticClass:"kurwix",attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[i("sui-modal-header",[e._v("Delete server?")]),i("sui-modal-content",[i("sui-container",[i("div",[e._v("\n                    Delete server "),i("b",[e._v(e._s(e.server.name)+" - "+e._s(e.server.hostname))]),e._v("? This will also delete all associated clients.\n                ")])])],1),i("sui-modal-actions",[i("sui-button",{attrs:{floated:"right",compact:"",positive:""},on:{click:e.onAccept}},[e._v("OK")]),i("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},Qe=[],Ze=(Ye=Object(b["a"])({data:function(){return{server:{},open:!1}}}),Ye(We=function(e){function t(){return Object(v["a"])(this,t),Object(p["a"])(this,Object(m["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"show",value:function(e){this.server=e,this.open=!0}},{key:"onAccept",value:function(){this.open=!1,this.$store.dispatch("deleteServer",this.server)}},{key:"onReject",value:function(){this.open=!1}}]),t}(b["b"]))||We),et=Ze,tt=(i("6c11"),Object(y["a"])(et,Ge,Qe,!1,null,"0cf625a0",null));tt.options.__file="DeleteServerDialog.vue";var it,nt,st=tt.exports,at=(it=Object(b["a"])({name:"Home",components:{NavigationBar:C,ConfigList:se,NewServerDialog:ye,NewClientDialog:Fe,DeploymentDialog:Xe,DeleteServerDialog:st}}),it(nt=function(e){function t(){var e;return Object(v["a"])(this,t),e=Object(p["a"])(this,Object(m["a"])(t).call(this)),e.onClickedAddClient=e.onClickedAddClient.bind(Object(z["a"])(Object(z["a"])(e))),e.onClickedAddServer=e.onClickedAddServer.bind(Object(z["a"])(Object(z["a"])(e))),e.onClickedDeployServer=e.onClickedDeployServer.bind(Object(z["a"])(Object(z["a"])(e))),e}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"onClickedAddClient",value:function(){this.$refs.newClientDialog.open=!0}},{key:"onClickedAddServer",value:function(){this.$refs.newServerDialog.open=!0}},{key:"onClickedDeployServer",value:function(e){this.$refs.deploymentDialog.show(e)}},{key:"onClickedDeleteServer",value:function(e){this.$refs.deleteServerDialog.show(e)}},{key:"mounted",value:function(){this.$root.$on(J,this.onClickedDeployServer),this.$root.$on(Y,this.onClickedDeleteServer)}},{key:"beforeDestroy",value:function(){this.$root.$off(J,this.onClickedDeployServer),this.$root.$off(Y,this.onClickedDeleteServer)}},{key:"servers",get:function(){return this.$store.state.servers}},{key:"clients",get:function(){return this.$store.state.clients}},{key:"isSuperuser",get:function(){return this.$store.getters.isSuperuser}},{key:"emailEnabled",get:function(){return this.$store.state.settings.email_enabled}}]),t}(b["b"]))||nt),rt=at,ot=(i("21bb"),Object(y["a"])(rt,F,U,!1,null,null,null));ot.options.__file="Home.vue";var lt,ct,ut,dt=ot.exports,vt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"settings"},[i("sui-tab",{attrs:{menu:{vertical:!0,fluid:!0,tabular:!0}}},[i("sui-tab-pane",{attrs:{icon:"mail",title:"E-Mail"}},[i("EmailSettings")],1),i("sui-tab-pane",{attrs:{icon:"user",title:"Registration"}},[i("RegistrationSettings")],1),i("sui-tab-pane",{attrs:{icon:"filter",title:"DNS filtering"}},[i("DnsFilteringSettings")],1),i("sui-tab-pane",{attrs:{icon:"key",title:"SSH keys"}},[i("SshKeysSettings")],1)],1)],1)},ft=[],pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"content"},[i("div",{staticClass:"field"},[i("sui-message",{attrs:{info:""}},[e._v("\n                E-Mail settings are configured in "),i("span",{staticClass:"shell"},[e._v("${DATA_DIR}/data/settings.json")]),e._v(" and are used\n                to send logs, config files, etc. SMTP settings cannot be set here, but you can toggle e-mail sender.\n            ")])],1),i("div",{staticClass:"field"},[i("div",{staticClass:"ui checked checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.email_enabled,expression:"settings.email_enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.settings.email_enabled)?e._i(e.settings.email_enabled,null)>-1:e.settings.email_enabled},on:{change:function(t){var i=e.settings.email_enabled,n=t.target,s=!!n.checked;if(Array.isArray(i)){var a=null,r=e._i(i,a);n.checked?r<0&&e.$set(e.settings,"email_enabled",i.concat([a])):r>-1&&e.$set(e.settings,"email_enabled",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.settings,"email_enabled",s)}}}),i("label",[e._v("Enable e-mail")])])]),e.settings.email_enabled?i("div",{staticClass:"field"},[i("div",{staticClass:"field"},[i("label",[e._v("From e-mail")]),i("div",{staticClass:"ui left icon input disabled"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.readOnly.email_from,expression:"readOnly.email_from"}],key:"email_from",attrs:{placeholder:"From for automated e-mails sent by this system",type:"text"},domProps:{value:e.readOnly.email_from},on:{input:function(t){t.target.composing||e.$set(e.readOnly,"email_from",t.target.value)}}}),i("i",{staticClass:"user icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"fields"},[i("div",{staticClass:"twelve wide field"},[i("label",[e._v("SMTP server (only with TLS support)")]),i("div",{staticClass:"ui left icon input disabled"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.readOnly.email_smtp_server,expression:"readOnly.email_smtp_server"}],attrs:{placeholder:"Outgoing SMTP server",type:"text"},domProps:{value:e.readOnly.email_smtp_server},on:{input:function(t){t.target.composing||e.$set(e.readOnly,"email_smtp_server",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"four wide field"},[i("label",[e._v("Port")]),i("div",{staticClass:"ui left icon input disabled"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.readOnly.email_smtp_port,expression:"readOnly.email_smtp_port"}],attrs:{placeholder:"Outgoing SMTP server port",min:"1",max:"65535",type:"number"},domProps:{value:e.readOnly.email_smtp_port},on:{input:function(t){t.target.composing||e.$set(e.readOnly,"email_smtp_port",t.target.value)}}}),i("i",{staticClass:"lock icon",attrs:{"aria-hidden":"true"}})])])]),i("div",{staticClass:"field"},[i("label",[e._v("SMTP login")]),i("div",{staticClass:"ui left icon input disabled"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.readOnly.email_smtp_login,expression:"readOnly.email_smtp_login"}],attrs:{placeholder:"Outgoing SMTP server login (e-mail address)",type:"text"},domProps:{value:e.readOnly.email_smtp_login},on:{input:function(t){t.target.composing||e.$set(e.readOnly,"email_smtp_login",t.target.value)}}}),i("i",{staticClass:"user icon",attrs:{"aria-hidden":"true"}})])]),e._m(0)]):e._e(),i("div",{staticClass:"field"},[i("button",{staticClass:"ui button settings-button",attrs:{type:"submit",role:"button"},on:{submit:function(e){}}},[e._v("Save")])])])])},mt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"field"},[i("label",[e._v("SMTP password (hidden)")]),i("div",{staticClass:"ui left icon input disabled"},[i("input",{attrs:{value:"See settings.json",type:"text"}}),i("i",{staticClass:"lock icon",attrs:{"aria-hidden":"true"}})])])}],ht=i("bd86"),bt=(lt=Object(b["a"])({name:"EmailSettings",components:{NavigationBar:C}}),lt((ut=function(e){function t(){var e,i;Object(v["a"])(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return i=Object(p["a"])(this,(e=Object(m["a"])(t)).call.apply(e,[this].concat(s))),Object(ht["a"])(Object(z["a"])(Object(z["a"])(i)),"settings",{email_enabled:!1}),Object(ht["a"])(Object(z["a"])(Object(z["a"])(i)),"readOnly",{email_from:void 0,email_smtp_server:void 0,email_smtp_port:465,email_smtp_login:void 0,email_smtp_password:"never available in ui"}),i}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"handleSubmit",value:function(){this.$store.dispatch("setSettings",this.settings)}},{key:"mounted",value:function(){this.settings.email_enabled=I.a.cloneDeep(this.$store.state.settings.email_enabled),this.readOnly=I.a.cloneDeep(I.a.pick(this.$store.state.settings,["email_from","email_smtp_server","email_smtp_port","email_smtp_login","email_smtp_password"]))}}]),t}(b["b"]),ct=ut))||ct),gt=bt,_t=Object(y["a"])(gt,pt,mt,!1,null,"762a6415",null);_t.options.__file="EmailSettings.vue";var yt,jt,Ct,kt=_t.exports,St=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("form",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"field"},[i("div",{staticClass:"ui checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.registration_enabled,expression:"settings.registration_enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.settings.registration_enabled)?e._i(e.settings.registration_enabled,null)>-1:e.settings.registration_enabled},on:{change:function(t){var i=e.settings.registration_enabled,n=t.target,s=!!n.checked;if(Array.isArray(i)){var a=null,r=e._i(i,a);n.checked?r<0&&e.$set(e.settings,"registration_enabled",i.concat([a])):r>-1&&e.$set(e.settings,"registration_enabled",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.settings,"registration_enabled",s)}}}),i("label",[e._v("New users registration")])])]),i("div",{staticClass:"field"},[i("button",{staticClass:"ui button settings-button",attrs:{type:"submit",role:"button"},on:{submit:function(e){}}},[e._v("Save")])])])])},Ot=[],wt=(yt=Object(b["a"])({name:"RegistrationSettings"}),yt((Ct=function(e){function t(){var e,i;Object(v["a"])(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return i=Object(p["a"])(this,(e=Object(m["a"])(t)).call.apply(e,[this].concat(s))),Object(ht["a"])(Object(z["a"])(Object(z["a"])(i)),"settings",{registration_enabled:void 0}),i}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"handleSubmit",value:function(){this.$store.dispatch("setSettings",this.settings)}},{key:"mounted",value:function(){this.settings=I.a.cloneDeep(I.a.pick(this.$store.state.settings,["registration_enabled","admin_activation_required"]))}}]),t}(b["b"]),jt=Ct))||jt),$t=wt,Et=Object(y["a"])($t,St,Ot,!1,null,"74d6e928",null);Et.options.__file="RegistrationSettings.vue";var Dt,Nt,xt=Et.exports,Pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"ui form"},[i("div",{staticClass:"field"},[i("sui-message",{attrs:{info:""}},[i("p",[e._v("\n                Here you can select hosts lists for\n                "),i("a",{attrs:{href:"https://en.wikipedia.org/wiki/Ad_blocking#DNS_filtering",target:"_blank"}},[i("u",[i("b",[e._v("DNS ad blocking")])]),e._v(" "),i("i",{staticClass:"icon external alternate"})]),e._v("\n                (aka "),i("i",[e._v("DNS sinkhole")]),e._v("). Those lists are uploaded to VPN server when DNS deployment is enabled.\n            ")]),i("p",[e._v("\n                Servers are not automatically updated - only the internal database is. You must re-deploy servers to use updated lists.\n            ")]),i("p",[e._v("\n                Ping "),i("b",[e._v("gateway.vpnathome")]),e._v(" to see if your VPN DNS server is used. It should resolve to your deployed VPN gateway.\n            ")])])],1),e._l(e.list,function(t){return i("div",{key:t.id,staticClass:"field"},[i("div",{staticClass:"ui checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.enabled,expression:"item.enabled"}],attrs:{disabled:e.isRunning,type:"checkbox"},domProps:{checked:Array.isArray(t.enabled)?e._i(t.enabled,null)>-1:t.enabled},on:{change:function(i){var n=t.enabled,s=i.target,a=!!s.checked;if(Array.isArray(n)){var r=null,o=e._i(n,r);s.checked?o<0&&e.$set(t,"enabled",n.concat([r])):o>-1&&e.$set(t,"enabled",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(t,"enabled",a)}}}),t.count?i("label",[e._v(e._s(t.url)+" ("+e._s(t.count)+" domains, "+e._s(e.formatTime(t))+")")]):i("label",[e._v(e._s(t.url))])])])}),i("div",{staticClass:"field"},[i("sui-button",{staticClass:"settings-button",attrs:{loading:e.isRunning,disabled:e.isRunning},on:{click:function(t){return t.preventDefault(),e.onClickedUpdate(t)}}},[e._v("Update")]),e.output?i("span",[e._v(e._s(e.output))]):e._e()],1)],2)},At=[],Rt=(i("ac6a"),Dt=Object(b["a"])({name:"DnsFilteringSettings",data:function(){return{isRunning:!1,process:null,output:null}},computed:{list:function(){var e=I.a.cloneDeep(this.$store.state.blockLists);return I.a.forEach(e,function(e){e._last_updated=K()(e.last_updated).fromNow()}),e}},methods:{formatTime:function(e){return e.last_updated?K()(e.last_updated).fromNow():""}}}),Dt(Nt=function(e){function t(){return Object(v["a"])(this,t),Object(p["a"])(this,Object(m["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"onClickedUpdate",value:function(){this.process=new Ke({sources:this.list}),this.process.onStart=this.onStartUpdate,this.process.onOutput=this.onOutput,this.process.onFinish=this.onFinishedUpdate,this.process.onClose=this.onFinishedUpdate,this.process.onError=this.onFinishedUpdate,this.process.connect("ws://".concat(window.location.host,"/ws/update_block_lists/")),this.isRunning=!0}},{key:"onStartUpdate",value:function(){this.isRunning=!0}},{key:"onOutput",value:function(e){this.output=I.a.last(e)}},{key:"onFinishedUpdate",value:function(){this.isRunning=!1,this.$store.dispatch("getBlockListSources")}},{key:"handleSubmit",value:function(){this.$store.dispatch("setBlockListSources",this.list)}}]),t}(b["b"]))||Nt),Lt=Rt,Ft=Object(y["a"])(Lt,Pt,At,!1,null,"16447182",null);Ft.options.__file="DnsFilteringSettings.vue";var Ut,zt,Vt=Ft.exports,Mt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"field"},[i("sui-message",{attrs:{info:""}},[e._v("\n            Your SSH deployment key is located in "),i("span",{staticClass:"shell"},[e._v("${DATA_DIR}/ssh/vpnathome_server_deployment_key.pub")]),e._v("."),i("br"),e._v("\n            Make sure you upload the public key to your target deployment server.\n        ")])],1),i("div",{staticClass:"field"},[i("label",[e._v("Public SSH deployment key (select all and copy)")]),i("div",{staticClass:"ui input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.sshPublicKey,expression:"sshPublicKey"}],attrs:{type:"text",readonly:""},domProps:{value:e.sshPublicKey},on:{input:function(t){t.target.composing||(e.sshPublicKey=t.target.value)}}})])])])},qt=[],Tt=(Ut=Object(b["a"])({name:"SshKeysSettings"}),Ut(zt=function(e){function t(){return Object(v["a"])(this,t),Object(p["a"])(this,Object(m["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"handleSubmit",value:function(){}},{key:"mounted",value:function(){this.$store.dispatch("getSshPublicKey")}},{key:"sshPublicKey",get:function(){return this.$store.state.sshPublicKey}}]),t}(b["b"]))||zt),Ht=Tt,Kt=Object(y["a"])(Ht,Mt,qt,!1,null,"b0c2b0da",null);Kt.options.__file="SshKeysSettings.vue";var Bt,It,Jt=Kt.exports,Yt=(Bt=Object(b["a"])({name:"Settings",components:{EmailSettings:kt,RegistrationSettings:xt,DnsFilteringSettings:Vt,SshKeysSettings:Jt}}),Bt(It=function(e){function t(){return Object(v["a"])(this,t),Object(p["a"])(this,Object(m["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),t}(b["b"]))||It),Wt=Yt,Xt=(i("e1f2"),Object(y["a"])(Wt,vt,ft,!1,null,"e7a2053c",null));Xt.options.__file="Settings.vue";var Gt,Qt,Zt,ei=Xt.exports,ti=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login top-space"},[i("div",{staticClass:"ui grid center aligned"},[e._m(0),i("div",{staticClass:"row"},[i("div",{staticClass:"six wide column left aligned"},[i("form",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"field"},[i("label",[e._v("Login E-mail")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],attrs:{type:"email",name:"login",placeholder:"E-mail"},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}})]),i("div",{staticClass:"field"},[i("label",{},[e._v("Password")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"Password (min 8 chars)"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),i("button",{staticClass:"ui button",attrs:{disabled:e.invalid}},[e._v("Login")])])])]),e.canRegister?i("div",{staticClass:"row center aligned"},[i("router-link",{attrs:{to:"/register"}},[e._v("Register")])],1):e._e(),e.error?i("div",{staticClass:"row center aligned"},[e._v("\n            Login failed\n        ")]):e._e()])])},ii=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row center aligned"},[i("h1",{staticClass:"ui header green center aligned"},[e._v("Login"),i("br"),e._v("VPN@Home")])])}],ni=(Gt=Object(b["a"])({components:{},validations:{login:{required:ue["required"]},password:{required:ue["required"],minLength:Object(ue["minLength"])(8)}}}),Gt((Zt=function(e){function t(){var e,i;Object(v["a"])(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return i=Object(p["a"])(this,(e=Object(m["a"])(t)).call.apply(e,[this].concat(s))),Object(ht["a"])(Object(z["a"])(Object(z["a"])(i)),"login",""),Object(ht["a"])(Object(z["a"])(Object(z["a"])(i)),"password",""),Object(ht["a"])(Object(z["a"])(Object(z["a"])(i)),"error",!1),i}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"handleSubmit",value:function(){var e=this;this.$api.login(this.login,this.password,function(){e.$store.commit("login"),e.$store.dispatch("hydrate"),e.$router.push("/")},function(){e.error=!0})}},{key:"invalid",get:function(){return this.$v.$invalid}},{key:"canRegister",get:function(){return this.$store.getters.canRegister}}]),t}(b["b"]),Qt=Zt))||Qt),si=ni,ai=(i("d6db"),Object(y["a"])(si,ti,ii,!1,null,null,null));ai.options.__file="Login.vue";var ri,oi,li,ci=ai.exports,ui=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login top-space"},[i("div",{staticClass:"ui grid center aligned"},[e._m(0),i("div",{staticClass:"row"},[i("div",{staticClass:"six wide column left aligned"},[i("form",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"field"},[i("label",[e._v("Registration E-mail")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],attrs:{type:"email",name:"login",placeholder:"E-mail"},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}})]),i("div",{staticClass:"field"},[i("label",{},[e._v("Password")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"Password (min 8 chars)"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),i("button",{staticClass:"ui button",attrs:{disabled:e.invalid}},[e._v("Register")])])])]),i("div",{staticClass:"row center aligned"},[i("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1),e.error?i("div",{staticClass:"row center aligned"},[e._v("\n            Registration failed\n        ")]):e._e()])])},di=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row center aligned"},[i("h1",{staticClass:"ui header green center aligned"},[e._v("Register"),i("br"),e._v("VPN@Home")])])}],vi=(ri=Object(b["a"])({components:{},validations:{login:{required:ue["required"],email:ue["email"]},password:{required:ue["required"],minLength:Object(ue["minLength"])(8)}}}),ri((li=function(e){function t(){var e,i;Object(v["a"])(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return i=Object(p["a"])(this,(e=Object(m["a"])(t)).call.apply(e,[this].concat(s))),Object(ht["a"])(Object(z["a"])(Object(z["a"])(i)),"login",""),Object(ht["a"])(Object(z["a"])(Object(z["a"])(i)),"password",""),Object(ht["a"])(Object(z["a"])(Object(z["a"])(i)),"error",!1),i}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"handleSubmit",value:function(){var e=this;this.$api.register(this.login,this.password,function(){e.$store.commit("login"),e.$store.dispatch("hydrate"),e.$router.push("/")},function(){e.error=!0})}},{key:"invalid",get:function(){return this.$v.$invalid}}]),t}(b["b"]),oi=li))||oi),fi=vi,pi=(i("2cfd"),Object(y["a"])(fi,ui,di,!1,null,null,null));pi.options.__file="Register.vue";var mi=pi.exports,hi=(i("6762"),i("2fdb"),i("2f62")),bi=i("bc3a"),gi=i.n(bi),_i=i("a78e"),yi=i.n(_i),ji="/api/accounts/login/",Ci="/api/accounts/register/",ki="/api/accounts/user/",Si="/api/accounts/logout/",Oi="/api/openvpn/servers/",wi="/api/openvpn/clients/",$i="/api/management/settings/",Ei=function(){function e(){Object(v["a"])(this,e)}return Object(f["a"])(e,[{key:"client",value:function(){var e=yi.a.get("csrftoken");return gi.a.create({headers:{"X-CSRFToken":e}})}},{key:"login",value:function(e,t,i,n){this.client().post(ji,{email:e,password:t}).then(function(e){i()},function(e){n()})}},{key:"register",value:function(e,t,i,n){this.client().post(Ci,{email:e,password:t}).then(function(e){i()},function(e){n()})}},{key:"logout",value:function(e){this.client().get(Si).then(function(t){e()})}},{key:"getUser",value:function(e,t){this.client().get(ki).then(function(t){return e(t.data)},function(e){return t()})}},{key:"getServers",value:function(e,t){this.client().get(Oi).then(function(t){e(t.data)},function(e){t()})}},{key:"addServer",value:function(e,t,i){this.client().post(Oi,e).then(function(e){return t(e.data)},function(e){return i()})}},{key:"deleteServer",value:function(e,t,i){this.client().delete("/api/openvpn/servers/".concat(e.id,"/")).then(function(e){return t(e.data)},function(e){return i()})}},{key:"getClients",value:function(e,t){this.client().get(wi).then(function(t){e(t.data)},function(e){t()})}},{key:"addClient",value:function(e,t,i){var n="/api/openvpn/servers/".concat(e.server,"/clients/");this.client().post(n,e).then(function(e){return t(e.data)},function(e){return i()})}},{key:"getSettings",value:function(e,t){this.client().get($i).then(function(t){e(t.data)},function(e){t()})}},{key:"setSettings",value:function(e,t,i){this.client().patch($i,e).then(function(e){t()},function(e){i()})}},{key:"sendClientConfig",value:function(e,t,i){var n="/api/openvpn/clients/".concat(e,"/send/");this.client().post(n,{}).then(function(i){return t(e)},function(t){return i(e)})}},{key:"getBlockListSources",value:function(e,t){var i="/api/management/block_lists/";this.client().get(i).then(function(t){return e(t.data)},function(e){return t()})}},{key:"setBlockListSources",value:function(e,t,i){var n="/api/management/block_lists/";this.client().put(n,e).then(function(e){return t()},function(e){return i()})}},{key:"getSshPublicKey",value:function(e,t){var i="/api/management/ssh/public/";this.client().get(i).then(function(t){return e(t.data)},function(e){return t()})}}]),e}();function Di(e){e.prototype.$api=new Ei(Ui)}a["default"].use(hi["a"]);var Ni=void 0,xi=new Ei,Pi={user:{authenticated:window.django.authenticated,email:"",permissions:[],superuser:!1},servers:[],clients:[],blockLists:[],sshPublicKey:"",status:{sendingClientConfigEmail:[],sendingServerConfigEmail:[],appNotReady:window.django.app_not_ready,blockLists:Ni},settings:{email_enabled:window.django.email_enabled,registration_enabled:window.django.registration_enabled}},Ai={canRegister:function(e){return e.settings.registration_enabled},hasServer:function(e){return e.servers.length>0},isAuthenticated:function(e){return e.user.authenticated},isSuperuser:function(e){return e.user.superuser},hasPermission:function(e){return function(t){return I.a.includes(e.user.permissions,t)}},isSendingClientConfigEmail:function(e){return function(t){return I.a.includes(e.status.sendingClientConfigEmail,t)}},email:function(e){return e.user.email},canSendEmail:function(e){var t=e.settings,i=e.user;return function(e){return t.email_enabled&&(e===i.email||i.superuser)}}},Ri={login:function(e){e.user.authenticated=!0},logout:function(e){var t=I.a.cloneDeep(Pi);I.a.assign(e,t)},loginError:function(e){e.auth.error="Error"},setUser:function(e,t){e.user.email=t.email,e.user.permissions=t.permissions,e.user.superuser=I.a.includes(t.permissions,"superuser")},setServers:function(e,t){e.servers=t},addServer:function(e,t){e.servers.push(t)},deleteServer:function(e,t){e.servers=I.a.filter(e.servers,function(e){return e.id!==t.id})},setClients:function(e,t){e.clients=t},addClient:function(e,t){e.clients.push(t)},setSendingClientConfigEmail:function(e,t){e.status.sendingClientConfigEmail.push(t)},clearSendingClientConfigEmail:function(e,t){e.status.sendingClientConfigEmail=I.a.filter(e.status.sendingClientConfigEmail,function(e){return e!==t})},setSettings:function(e,t){e.settings=t},setBlockListSources:function(e,t){e.blockLists=t},setSshPublicKey:function(e,t){e.sshPublicKey=t}},Li={hydrate:function(e){var t=e.dispatch;t("getSettings"),t("getUser"),t("getServers"),t("getClients"),t("getBlockListSources")},getUser:function(e){var t=e.commit;xi.getUser(function(e){return t("setUser",e)},function(e){})},getServers:function(e){var t=e.commit;xi.getServers(function(e){return t("setServers",e)},function(e){})},getClients:function(e){var t=e.commit;xi.getClients(function(e){return t("setClients",e)},function(e){})},addServer:function(e,t){var i=e.commit;xi.addServer(t,function(e){return i("addServer",e)},function(e){})},deleteServer:function(e,t){var i=e.dispatch;xi.deleteServer(t,function(e){i("getServers"),i("getClients")},function(e){})},addClient:function(e,t){var i=e.commit;xi.addClient(t,function(e){return i("addClient",e)},function(e){})},sendClientConfigEmail:function(e,t){var i=e.commit;i("setSendingClientConfigEmail",t),xi.sendClientConfig(t,function(e){return i("clearSendingClientConfigEmail",e)},function(e){return i("clearSendingClientConfigEmail",e)})},setSettings:function(e,t){var i=e.commit;xi.setSettings(t,function(e){return i("setSettings",t)},function(e){})},getSettings:function(e){var t=e.commit;xi.getSettings(function(e){return t("setSettings",e)},function(e){})},getBlockListSources:function(e){var t=e.commit;xi.getBlockListSources(function(e){return t("setBlockListSources",e)},function(e){})},setBlockListSources:function(e,t){var i=e.commit;xi.setBlockListSources(t,function(e){return i("setBlockListSources",t)},function(e){})},getSshPublicKey:function(e){var t=e.commit;xi.getSshPublicKey(function(e){return t("setSshPublicKey",e)},function(e){})}},Fi=new hi["a"].Store({state:I.a.cloneDeep(Pi),getters:Ai,mutations:Ri,actions:Li}),Ui=Fi;a["default"].use(L["a"]);var zi="login",Vi="register",Mi="home",qi="settings",Ti=new L["a"]({routes:[{path:"/",name:Mi,component:dt},{path:"/login",name:zi,component:ci,meta:{isPublic:!0,noNavbar:!0}},{path:"/register",name:Vi,component:mi,meta:{isPublic:!0,noNavbar:!0}},{path:"/settings",name:qi,component:ei}]});Ti.beforeEach(function(e,t,i){var n=!Ui.getters.isAuthenticated&&!e.meta.isPublic;n?i({path:"/login"}):i()});var Hi=Ti,Ki=i("92d5"),Bi=i.n(Ki);a["default"].config.productionTip=!1,a["default"].use(Di),a["default"].use(o.a),a["default"].use(Bi.a),Ui.state.status.appNotReady?new a["default"]({store:Ui,render:function(e){return e(R)}}).$mount("#app"):new a["default"]({router:Hi,store:Ui,render:function(e){return e(w)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";var n=i("5e27"),s=i.n(n);s.a},"5e27":function(e,t,i){},"6c11":function(e,t,i){"use strict";var n=i("2b23"),s=i.n(n);s.a},"8ba9":function(e,t,i){"use strict";var n=i("d5a8"),s=i.n(n);s.a},a997:function(e,t,i){"use strict";var n=i("0325"),s=i.n(n);s.a},a9e7:function(e,t,i){},b007:function(e,t,i){"use strict";var n=i("e43a"),s=i.n(n);s.a},b204:function(e,t,i){},bcc9:function(e,t,i){},cbea:function(e,t,i){"use strict";var n=i("b204"),s=i.n(n);s.a},cf16:function(e,t,i){},d5a8:function(e,t,i){},d6db:function(e,t,i){"use strict";var n=i("a9e7"),s=i.n(n);s.a},e07e:function(e,t,i){},e1f2:function(e,t,i){"use strict";var n=i("feb0"),s=i.n(n);s.a},e43a:function(e,t,i){},feb0:function(e,t,i){}});
//# sourceMappingURL=app.js.map